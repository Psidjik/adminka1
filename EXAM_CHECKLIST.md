# üìã –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –∑–∞—á–µ—Ç–∞: –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## üéØ –¶–µ–ª—å
–ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –≤—ã —É–º–µ–µ—Ç–µ:
1. –ü–æ–¥–Ω—è—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ docker-compose
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Jenkins –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏
3. –ü–æ–∫–∞–∑–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ Prometheus –∏ Grafana

---

## üì¶ –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```powershell
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –Ω—É–∂–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd C:\

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Psidjik/adminka1.git

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd adminka1
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å —Ñ–∞–π–ª—ã:
- `docker-compose.yml`
- `Jenkinsfile`
- –ü–∞–ø–∫–∏: `API-Gateway`, `CabinetBooking`, `User`, `prometheus`, `grafana`

---

## üê≥ –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker

```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
docker --version
docker-compose --version

# –ï—Å–ª–∏ Docker –Ω–µ –∑–∞–ø—É—â–µ–Ω, –∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop
```

**–ï—Å–ª–∏ Docker –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:**
- –°–∫–∞—á–∞–π—Ç–µ Docker Desktop —Å https://www.docker.com/products/docker-desktop
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ

---

## üöÄ –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```powershell
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ (—Ç–∞–º, –≥–¥–µ docker-compose.yml)
cd C:\adminka1

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose ps
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ "Up":
- booking-db
- cabinet-booking
- user
- api-gateway
- prometheus
- grafana

**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å:**
```powershell
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose logs [–∏–º—è_—Å–µ—Ä–≤–∏—Å–∞]

# –ù–∞–ø—Ä–∏–º–µ—Ä:
docker-compose logs api-gateway
```

---

## üóÑÔ∏è –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

```powershell
# –°–æ–∑–¥–∞—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL
docker exec booking-db psql -U postgres -c "CREATE DATABASE cabinet_booking;"
docker exec booking-db psql -U postgres -c "CREATE DATABASE users;"
```

**–ï—Å–ª–∏ –±–∞–∑—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç:** –í—ã —É–≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É "already exists" - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –∑–Ω–∞—á–∏—Ç –±–∞–∑—ã —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã.

---

## ‚úÖ –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤

### 5.1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API Gateway
```powershell
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ curl
Invoke-WebRequest -Uri "http://localhost:8080/check"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –û—Ç–≤–µ—Ç "locked and loaded"

### 5.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Prometheus
```powershell
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
start http://localhost:9090
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **Status** ‚Üí **Targets**
2. –í—Å–µ targets –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ **UP**:
   - api-gateway
   - cabinet-booking
   - user
   - prometheus

### 5.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Grafana
```powershell
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
start http://localhost:3000
```

**–í—Ö–æ–¥:**
- –õ–æ–≥–∏–Ω: `admin`
- –ü–∞—Ä–æ–ª—å: `admin`

---

## üìä –®–∞–≥ 6: –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫

### 6.1. –í Prometheus

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:9090
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Status** ‚Üí **Targets**
3. –ü–æ–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –≤—Å–µ targets **UP**
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Graph**
5. –í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å: `http_requests_received_total`
6. –ù–∞–∂–º–∏—Ç–µ **Execute**
7. –ü–æ–∫–∞–∂–∏—Ç–µ –º–µ—Ç—Ä–∏–∫–∏

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏:**
- `rate(http_requests_received_total[5m])` - —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤
- `microsoft_aspnetcore_hosting_http_server_request_duration_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤

### 6.2. –í Grafana

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
2. –í–æ–π–¥–∏—Ç–µ (admin/admin)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Dashboards** ‚Üí **Browse**
4. –ï—Å–ª–∏ –¥–∞—à–±–æ—Ä–¥ –µ—Å—Ç—å - –æ—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ
5. –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π:
   - –ù–∞–∂–º–∏—Ç–µ **"+"** ‚Üí **"Create Dashboard"**
   - –ù–∞–∂–º–∏—Ç–µ **"Add visualization"**
   - –í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö **"Prometheus"**
   - –í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å: `rate(http_requests_received_total[5m])`
   - –ù–∞–∂–º–∏—Ç–µ **"Apply"**
   - –ù–∞–∂–º–∏—Ç–µ **"Save dashboard"**

---

## üîÑ –®–∞–≥ 7: –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Jenkins (CI/CD)

### 7.1. –ó–∞–ø—É—Å–∫ Jenkins

```powershell
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Jenkins
docker run -d --name jenkins -p 8080:8080 -p 50000:50000 -v jenkins_home:/var/jenkins_home jenkins/jenkins:lts

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 30 —Å–µ–∫—É–Ω–¥, –ø–æ–∫–∞ Jenkins –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
Start-Sleep -Seconds 30

# –ü–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
docker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword
```

**–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ –ø–æ—Ä—Ç 8080 –∑–∞–Ω—è—Ç (API Gateway), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç:
```powershell
docker run -d --name jenkins -p 8081:8080 -p 50000:50000 -v jenkins_home:/var/jenkins_home jenkins/jenkins:lts
```

### 7.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Jenkins (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫)

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080 (–∏–ª–∏ http://localhost:8081)
2. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞
3. –ù–∞–∂–º–∏—Ç–µ **"Install suggested plugins"**
4. –°–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ)
5. –ù–∞–∂–º–∏—Ç–µ **"Start using Jenkins"**

### 7.3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ docker-compose –≤ Jenkins

```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å docker-compose –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Jenkins
docker exec -u root jenkins bash -c "curl -L 'https://github.com/docker/compose/releases/download/v2.24.5/docker-compose-linux-x86_64' -o /usr/local/bin/docker-compose && chmod +x /usr/local/bin/docker-compose"
```

### 7.4. –°–æ–∑–¥–∞–Ω–∏–µ Pipeline –≤ Jenkins

1. –í Jenkins –Ω–∞–∂–º–∏—Ç–µ **"New Item"**
2. –í–≤–µ–¥–∏—Ç–µ –∏–º—è: `CabinetBooking-CI-CD`
3. –í—ã–±–µ—Ä–∏—Ç–µ **"Pipeline"**
4. –ù–∞–∂–º–∏—Ç–µ **"OK"**
5. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:
   - **Definition:** Pipeline script from SCM
   - **SCM:** Git
   - **Repository URL:** `https://github.com/Psidjik/adminka1.git`
   - **Branches:** `*/master`
   - **Script Path:** `Jenkinsfile`
6. –ù–∞–∂–º–∏—Ç–µ **"Save"**

### 7.5. –ó–∞–ø—É—Å–∫ –ø–µ—Ä–≤–æ–π —Å–±–æ—Ä–∫–∏

1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Pipeline –Ω–∞–∂–º–∏—Ç–µ **"Build Now"**
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏
3. –ü–æ–∫–∞–∂–∏—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏

### 7.6. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏

**–í–∞—Ä–∏–∞–Ω—Ç 1: Poll SCM (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)**
1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Pipeline –≤–∫–ª—é—á–∏—Ç–µ **"Poll SCM"**
2. –í–≤–µ–¥–∏—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ: `H/5 * * * *` (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
3. –°–¥–µ–ª–∞–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
4. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ:
   ```powershell
   git add .
   git commit -m "Test CI/CD"
   git push
   ```
5. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ 5 –º–∏–Ω—É—Ç - Jenkins –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç —Å–±–æ—Ä–∫—É

**–í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫**
- –ü—Ä–æ—Å—Ç–æ –Ω–∞–∂–º–∏—Ç–µ **"Build Now"** –ø–æ—Å–ª–µ push –≤ Git

---

## üé§ –ü–ª–∞–Ω –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –∑–∞—á–µ—Ç–µ

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (5 –º–∏–Ω—É—Ç)
- –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –ó–∞–ø—É—Å—Ç–∏—Ç—å docker-compose
- –°–æ–∑–¥–∞—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 2. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è docker-compose (2 –º–∏–Ω—É—Ç—ã)
- –ü–æ–∫–∞–∑–∞—Ç—å `docker-compose.yml`
- –ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã: `docker-compose ps`
- –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞

### 3. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ (5 –º–∏–Ω—É—Ç)
- **Prometheus:**
  - –ü–æ–∫–∞–∑–∞—Ç—å Status ‚Üí Targets (–≤—Å–µ UP)
  - –í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å: `http_requests_received_total`
  - –ü–æ–∫–∞–∑–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫
- **Grafana:**
  - –í–æ–π—Ç–∏ –≤ Grafana
  - –ü–æ–∫–∞–∑–∞—Ç—å –¥–∞—à–±–æ—Ä–¥ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π
  - –ü–æ–∫–∞–∑–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –º–µ—Ç—Ä–∏–∫

### 4. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Jenkins (5 –º–∏–Ω—É—Ç)
- –ü–æ–∫–∞–∑–∞—Ç—å Jenkins
- –ü–æ–∫–∞–∑–∞—Ç—å Pipeline
- –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä–∫—É –≤—Ä—É—á–Ω—É—é
- –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏
- –û–±—ä—è—Å–Ω–∏—Ç—å, —á—Ç–æ Jenkins –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ push –≤ Git

### 5. –ò—Ç–æ–≥ (1 –º–∏–Ω—É—Ç–∞)
- –†–µ–∑—é–º–µ: —á—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ
- –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç: docker-compose, –º–µ—Ç—Ä–∏–∫–∏, CI/CD

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü–æ—Ä—Ç 8080 –∑–∞–Ω—è—Ç
**–†–µ—à–µ–Ω–∏–µ:**
```powershell
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å API Gateway –∏–ª–∏ Jenkins
docker stop api-gateway
# –∏–ª–∏
docker stop jenkins
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
docker-compose ps postgres

# –ï—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω:
docker-compose up -d postgres
Start-Sleep -Seconds 5
docker exec booking-db psql -U postgres -c "CREATE DATABASE cabinet_booking;"
docker exec booking-db psql -U postgres -c "CREATE DATABASE users;"
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –°–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
```powershell
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose logs [–∏–º—è_—Å–µ—Ä–≤–∏—Å–∞]

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
docker-compose restart [–∏–º—è_—Å–µ—Ä–≤–∏—Å–∞]

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d --build [–∏–º—è_—Å–µ—Ä–≤–∏—Å–∞]
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Prometheus –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏
**–†–µ—à–µ–Ω–∏–µ:**
```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker exec prometheus cat /etc/prometheus/prometheus.yml

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Prometheus
docker-compose restart prometheus

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å targets
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:9090 ‚Üí Status ‚Üí Targets
```

### –ü—Ä–æ–±–ª–µ–º–∞ 5: Grafana –Ω–µ –≤–∏–¥–∏—Ç Prometheus
**–†–µ—à–µ–Ω–∏–µ:**
1. –í Grafana –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Configuration** ‚Üí **Data Sources**
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Prometheus –¥–æ–±–∞–≤–ª–µ–Ω
3. –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤—å—Ç–µ –≤—Ä—É—á–Ω—É—é:
   - URL: `http://prometheus:9090`
   - –ù–∞–∂–º–∏—Ç–µ **"Save & Test"**

---

## üìù –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ –∫–æ–º–∞–Ω–¥

```powershell
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Psidjik/adminka1.git
cd adminka1

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –°–æ–∑–¥–∞—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker exec booking-db psql -U postgres -c "CREATE DATABASE cabinet_booking;"
docker exec booking-db psql -U postgres -c "CREATE DATABASE users;"

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose logs -f [–∏–º—è_—Å–µ—Ä–≤–∏—Å–∞]

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ
docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
docker-compose restart [–∏–º—è_—Å–µ—Ä–≤–∏—Å–∞]

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞–ø—Ä—è–º—É—é
Invoke-WebRequest -Uri "http://localhost:8080/metrics"
Invoke-WebRequest -Uri "http://localhost:28712/metrics"
Invoke-WebRequest -Uri "http://localhost:28713/metrics"
```

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞—á–µ—Ç–æ–º

- [ ] –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω
- [ ] Docker –∏ docker-compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã (`docker-compose ps`)
- [ ] –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω—ã
- [ ] Prometheus –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:9090
- [ ] –í—Å–µ targets –≤ Prometheus –≤ —Å—Ç–∞—Ç—É—Å–µ UP
- [ ] Grafana –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ http://localhost:3000
- [ ] Jenkins –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- [ ] Pipeline —Å–æ–∑–¥–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Prometheus
- [ ] –î–∞—à–±–æ—Ä–¥ —Å–æ–∑–¥–∞–Ω –≤ Grafana

---

## üí° –°–æ–≤–µ—Ç—ã –¥–ª—è —É—Å–ø–µ—à–Ω–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

1. **–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å –∑–∞—Ä–∞–Ω–µ–µ:** –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Å–µ —à–∞–≥–∏ –¥–æ–º–∞
2. **–ò–º–µ–π—Ç–µ –∑–∞–ø–∞—Å–Ω–æ–π –ø–ª–∞–Ω:** –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ–±—ä—è—Å–Ω–∏—Ç–µ, —á—Ç–æ –æ–±—ã—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. **–ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –ª–æ–≥–∏:** –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏, –ø–æ–∫–∞–∂–∏—Ç–µ –ª–æ–≥–∏ –∏ –æ–±—ä—è—Å–Ω–∏—Ç–µ, –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å
4. **–û–±—ä—è—Å–Ω—è–π—Ç–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç–µ:** –ì–æ–≤–æ—Ä–∏—Ç–µ –≤—Å–ª—É—Ö, —á—Ç–æ –≤—ã –¥–µ–ª–∞–µ—Ç–µ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
5. **–ë—É–¥—å—Ç–µ –≥–æ—Ç–æ–≤—ã –∫ –≤–æ–ø—Ä–æ—Å–∞–º:** –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–ø—Ä–æ—Å–∏—Ç—å –ø—Ä–æ –ª—é–±—É—é —á–∞—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã

---

## üìö –ß—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã

**–í–æ–ø—Ä–æ—Å: –ß—Ç–æ —Ç–∞–∫–æ–µ docker-compose?**
–û—Ç–≤–µ—Ç: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –§–∞–π–ª docker-compose.yml –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏ –∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

**–í–æ–ø—Ä–æ—Å: –ß—Ç–æ —Ç–∞–∫–æ–µ Prometheus?**
–û—Ç–≤–µ—Ç: –°–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–±–æ—Ä–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫. –°–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥.

**–í–æ–ø—Ä–æ—Å: –ß—Ç–æ —Ç–∞–∫–æ–µ Grafana?**
–û—Ç–≤–µ—Ç: –°–∏—Å—Ç–µ–º–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫. –ë–µ—Ä–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Prometheus –∏ —Ä–∏—Å—É–µ—Ç –∫—Ä–∞—Å–∏–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏.

**–í–æ–ø—Ä–æ—Å: –ß—Ç–æ —Ç–∞–∫–æ–µ Jenkins?**
–û—Ç–≤–µ—Ç: –°–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ—è. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–±–æ—Ä–∫—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ Git.

**–í–æ–ø—Ä–æ—Å: –ß—Ç–æ —Ç–∞–∫–æ–µ –º–µ—Ç—Ä–∏–∫–∏?**
–û—Ç–≤–µ—Ç: –ß–∏—Å–ª–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤, –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏, –æ—à–∏–±–∫–∏ –∏ —Ç.–¥.

---

## üöÄ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–µ–π

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```powershell
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker-compose ps

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ API Gateway
Invoke-WebRequest -Uri "http://localhost:8080/metrics" | Select-Object StatusCode

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ CabinetBooking
Invoke-WebRequest -Uri "http://localhost:28712/metrics" | Select-Object StatusCode

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ User
Invoke-WebRequest -Uri "http://localhost:28713/metrics" | Select-Object StatusCode

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Prometheus targets
$response = Invoke-WebRequest -Uri "http://localhost:9090/api/v1/targets" -UseBasicParsing
$json = $response.Content | ConvertFrom-Json
$json.data.activeTargets | ForEach-Object { Write-Host "$($_.labels.job): $($_.health)" }
```

**–í—Å–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "up" –∏–ª–∏ "200 OK"!**

